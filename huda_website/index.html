<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HuDa Library — Training Guide</title>
    <!-- TailwindCSS (CDN for simplicity) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons (vanilla JS) -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <meta name="description" content="Training website for the HuDa humanitarian data library." />
  </head>
  <body class="h-full">
    <!-- App Wrapper -->
    <div class="min-h-screen grid grid-cols-1 md:grid-cols-[280px_1fr]">
      <!-- Sidebar -->
      <aside class="bg-white border-r border-gray-200 p-4 md:p-6">
        <div class="flex items-center gap-2 mb-6">
          <i data-lucide="database" class="w-6 h-6 text-indigo-600"></i>
          <h1 class="text-lg font-semibold tracking-tight">HuDa Usage Guide</h1>
        </div>
        <nav class="space-y-1" id="sidebar">
          <!-- Each button uses data-target to map to a main content section -->
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100 active" data-target="overview">
            <i data-lucide="home" class="w-4 h-4"></i>
            Overview
          </button>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="installation">
            <i data-lucide="download" class="w-4 h-4"></i>
            Installation
          </button>
          <div class="pt-3 pb-1 text-xs uppercase tracking-wider text-gray-500">Phases</div>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="opening">
            <i data-lucide="folder-open" class="w-4 h-4"></i>
            Opening
          </button>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="cleaning">
            <i data-lucide="brush" class="w-4 h-4"></i>
            Cleaning
          </button>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="transformation">
            <i data-lucide="workflow" class="w-4 h-4"></i>
            Transformation
          </button>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="validation">
            <i data-lucide="shield-check" class="w-4 h-4"></i>
            Validation & Quality
          </button>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="geospatial">
            <i data-lucide="map" class="w-4 h-4"></i>
            Geospatial
          </button>
          <button class="nav-btn w-full flex items-center gap-3 px-3 py-2 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-100" data-target="analysis">
            <i data-lucide="line-chart" class="w-4 h-4"></i>
            Analysis
          </button>
        </nav>
        <div class="mt-8 text-xs text-gray-500">© <span id="year"></span> HuDa. All rights reserved.</div>
      </aside>

      <!-- Main Content -->
      <main class="p-6 md:p-10">
        <!-- Header -->
        <header class="mb-8 flex items-center justify-between">
          <div>
            <h2 class="text-2xl md:text-3xl font-bold tracking-tight">HuDa Library</h2>
            <p class="text-gray-600">Humanitarian Data utilities: simple, fast, consistent.</p>
          </div>
          <a href="https://lucide.dev/icons/" target="_blank" rel="noreferrer" class="hidden md:inline-flex items-center gap-2 text-sm text-gray-500 hover:text-gray-700">
            <i data-lucide="heart" class="w-4 h-4 text-rose-500"></i>
            Built with Tailwind + Lucide
          </a>
        </header>

        <!-- Sections -->
        <section id="overview" class="content-section">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Overview</h3>
            <p class="text-gray-700">HuDa is a Python library to speed up humanitarian data analysis in Afghanistan and beyond. It helps you open, clean, transform, validate, and visualize datasets with practical functions designed for field surveys, 5W, and monitoring data.</p>
            <ul class="list-disc pl-6 text-gray-700 mt-4 space-y-1">
              <li><span class="font-semibold">Consistent:</span> same design patterns across modules.</li>
              <li><span class="font-semibold">Fast:</span> leverages Polars/Pandas where needed.</li>
              <li><span class="font-semibold">Practical:</span> built on real humanitarian workflows.</li>
            </ul>
          </div>
        </section>

        <section id="installation" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Installation</h3>
            <div class="rounded-lg border border-amber-200 bg-amber-50 p-4 text-amber-800">
              <div class="flex items-center gap-2">
                <i data-lucide="construction" class="w-4 h-4"></i>
                <strong>Under development</strong>
              </div>
              <p class="mt-2 text-sm">The installation guide is not ready yet. It will be provided in the future.</p>
            </div>
          </div>
        </section>

        <section id="opening" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Phase: Opening</h3>
            <p class="text-gray-700">Open files (CSV, Excel, JSON). Very simple English. Afghan survey examples.</p>
            <a href="./docs_opening.html" class="inline-flex items-center gap-2 text-sm text-indigo-700 hover:text-indigo-900 underline">
              <i data-lucide="external-link" class="w-4 h-4"></i>
              Open full Opening docs
            </a>
          </div>
        </section>

        <section id="cleaning" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Phase: Cleaning</h3>
            <p class="text-gray-700">Standardize names, translate categories, fix numbers/dates, remove missing/duplicates, handle outliers, merge and geocode.</p>
            <a href="./docs_cleaning.html" class="inline-flex items-center gap-2 text-sm text-indigo-700 hover:text-indigo-900 underline">
              <i data-lucide="external-link" class="w-4 h-4"></i>
              Open full Cleaning docs
            </a>
          </div>
        </section>

        <section id="transformation" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Phase: Transformation</h3>
            <p class="text-gray-700">Aggregate, reshape, and prepare tidy datasets.</p>
            <pre class="rounded-md bg-gray-900 text-gray-100 p-4 overflow-auto"><code># Python
from huda.transformation import reshape_long_to_wide

wide = reshape_long_to_wide(df, index_cols=["province"], name_col="indicator", value_col="value")
</code></pre>
          </div>
        </section>

        <section id="validation" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Phase: Validation & Quality</h3>
            <p class="text-gray-700">Validate common humanitarian indicators and generate reports.</p>
            <pre class="rounded-md bg-gray-900 text-gray-100 p-4 overflow-auto"><code># Python
import polars as pl
from huda.validation_and_quality import humanatarian_index_validation_against_standards

activity = pl.DataFrame({
    "water_liters_per_person_per_day": [12, 18, 10],
    "ipc_phase": [3, 6, 2],
    "coverage_percent": [95, 105, -2],
})
violations = humanatarian_index_validation_against_standards(activity, standards="sphere")
print(violations)
</code></pre>
          </div>
        </section>

        <section id="geospatial" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Phase: Geospatial</h3>
            <p class="text-gray-700">Create maps for Afghan operations: points, choropleths, heatmaps.</p>
            <div class="grid md:grid-cols-2 gap-6">
              <div class="rounded-lg border border-gray-200 p-4">
                <div class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                  <i data-lucide="map-pin" class="w-4 h-4"></i>
                  Plot Points
                </div>
                <pre class="rounded-md bg-gray-900 text-gray-100 p-4 overflow-auto"><code># Python
from huda.geospatial import plot_data_on_map

m = plot_data_on_map(df, popup_col="site")
m.save("points.html")
</code></pre>
              </div>
              <div class="rounded-lg border border-gray-200 p-4">
                <div class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                  <i data-lucide="palette" class="w-4 h-4"></i>
                  Choropleth by Province
                </div>
                <pre class="rounded-md bg-gray-900 text-gray-100 p-4 overflow-auto"><code># Python
from huda.geospatial import choropleth_maps_by_region

m = choropleth_maps_by_region(df, gj, region_key="province", value_col="severity", legend_name="Severity")
m.save("choropleth.html")
</code></pre>
              </div>
              <div class="rounded-lg border border-gray-200 p-4">
                <div class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                  <i data-lucide="flame" class="w-4 h-4"></i>
                  Heatmap
                </div>
                <pre class="rounded-md bg-gray-900 text-gray-100 p-4 overflow-auto"><code># Python
from huda.geospatial import heatmap_crisis_intensity

m = heatmap_crisis_intensity(df, weight_col="people_in_need")
m.save("heatmap.html")
</code></pre>
              </div>
              <div class="rounded-lg border border-gray-200 p-4">
                <div class="flex items-center gap-2 text-sm font-medium text-gray-700 mb-2">
                  <i data-lucide="combine" class="w-4 h-4"></i>
                  Overlay Indicators
                </div>
                <pre class="rounded-md bg-gray-900 text-gray-100 p-4 overflow-auto"><code># Python
from huda.geospatial import overlay_multiple_indicators_on_map

m = overlay_multiple_indicators_on_map(df, indicators={"Need Index": "need_index"})
m.save("overlay.html")
</code></pre>
              </div>
            </div>
          </div>
        </section>

        <section id="analysis" class="content-section hidden">
          <div class="prose max-w-none">
            <h3 class="text-xl font-semibold mb-3">Phase: Analysis</h3>
            <p class="text-gray-700">Time series, forecasting, and correlations. (content coming soon)</p>
            <div class="rounded-lg border border-amber-200 bg-amber-50 p-4 text-amber-800 flex items-start gap-3">
              <i data-lucide="clock" class="w-4 h-4 mt-1"></i>
              <div>
                <strong>Coming soon</strong>
                <p class="text-sm mt-1">We will add examples for trend analysis, ARIMA/Prophet forecasting, and indicator correlations.</p>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <!-- Simple client-side tab navigation -->
    <script>
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();

      function setActive(targetId) {
        document.querySelectorAll('.content-section').forEach((el) => {
          if (el.id === targetId) el.classList.remove('hidden');
          else el.classList.add('hidden');
        });
        document.querySelectorAll('#sidebar .nav-btn').forEach((btn) => {
          if (btn.getAttribute('data-target') === targetId) {
            btn.classList.add('bg-gray-100');
          } else {
            btn.classList.remove('bg-gray-100');
          }
        });
      }

      document.querySelectorAll('#sidebar .nav-btn').forEach((btn) => {
        btn.addEventListener('click', () => setActive(btn.getAttribute('data-target')));
      });

      // Default visible section
      setActive('overview');

      // Render Lucide icons
      lucide.createIcons();
    </script>
  </body>
</html>
