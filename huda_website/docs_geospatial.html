<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HuDa Docs — Geospatial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="./theme.css" />
  </head>
  <body class="min-h-screen mdp">
    <!-- Top Gradient Header -->
    <div class="w-full bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white">
      <div class="max-w-7xl mx-auto px-4 md:px-6">
        <div class="flex items-center justify-between py-3">
          <div class="flex items-center gap-2">
            <i data-lucide="database" class="w-5 h-5"></i>
            <span class="font-semibold tracking-tight">HuDa — Humanitarian Data Library</span>
          </div>
          <div class="hidden md:flex items-center gap-4 text-sm opacity-90">
            <a href="./index.html#overview" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="home" class="w-4 h-4"></i>Overview</a>
            <a href="./index.html" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="book-open" class="w-4 h-4"></i>Docs</a>
            <a href="#about" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="info" class="w-4 h-4"></i>About Us</a>
            <a href="#contact" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="mail" class="w-4 h-4"></i>Contact Us</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Persistent Sidebar -->
    <aside class="hidden md:block fixed top-[48px] left-0 h-[calc(100vh-48px)] w-72 overflow-y-auto bg-white/80 backdrop-blur border-r border-white/60 shadow-sm p-4">
      <div class="flex items-center gap-2 mb-4">
        <i data-lucide="database" class="w-5 h-5 text-indigo-600"></i>
        <span class="text-sm font-semibold">HuDa Navigation</span>
      </div>
      <nav class="space-y-1 text-sm">
        <a href="./index.html#overview" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="home" class="w-4 h-4"></i>Overview</a>
        <div class="pt-2 pb-1 text-[10px] uppercase tracking-wider text-gray-500">Phases</div>
        <a href="./docs_opening.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="folder-open" class="w-4 h-4"></i>Opening</a>
        <a href="./docs_cleaning.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="brush" class="w-4 h-4"></i>Cleaning</a>
        <a href="./docs_transformation.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="workflow" class="w-4 h-4"></i>Transformation</a>
        <a href="./docs_validation_quality.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="shield-check" class="w-4 h-4"></i>Validation & Quality</a>
        <a href="./docs_geospatial.html" class="flex items-center gap-2 px-3 py-2 rounded-md bg-indigo-50 text-indigo-700 hover:bg-indigo-100"><i data-lucide="map" class="w-4 h-4"></i>Geospatial</a>
        <a href="./docs_analysis.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="line-chart" class="w-4 h-4"></i>Analysis</a>
        <a href="./docs_automation.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="workflow" class="w-4 h-4"></i>Automation</a>
        <a href="./docs_interoperability.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="share-2" class="w-4 h-4"></i>Interoperability</a>
        <a href="./docs_visualization.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="bar-chart-3" class="w-4 h-4"></i>Visualization</a>
        <a href="./docs_ml4humanitarian.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="bot" class="w-4 h-4"></i>ML for Humanitarian Data</a>
        <a href="./docs_document_processing.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="file-search" class="w-4 h-4"></i>Document Processing</a>
        <a href="./docs_humanitarian_metrics.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="activity" class="w-4 h-4"></i>Humanitarian Metrics</a>
      </nav>
    </aside>

    <!-- Content wrapper to offset sidebar -->
    <div class="md:pl-72">
    <div class="max-w-5xl mx-auto p-6 md:p-10">
      <header class="flex items-center justify-between mb-8">
        <div class="flex items-center gap-3">
          <i data-lucide="map" class="w-6 h-6 text-indigo-600"></i>
          <h1 class="text-2xl font-bold tracking-tight">Phase: Geospatial</h1>
        </div>
        <a href="./index.html" class="text-sm text-gray-600 hover:text-gray-900 inline-flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Back</a>
      </header>

      <p class="text-gray-700">We make maps and geospatial layers. Very simple English. Afghan survey examples. Colorful and copyable code.</p>

      <!-- plot_data_on_map -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="plot-data">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="map-pin" class="w-4 h-4"></i>
          plot_data_on_map(df, lat_col, lon_col, popup_cols=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Plot points on an interactive map.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> You have locations (clinics, schools, camps) with lat/lon.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Quick view of where sites are.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>df</code>: Polars table with coordinates.</li>
          <li><code>lat_col</code>, <code>lon_col</code>: column names for latitude/longitude.</li>
          <li><code>popup_cols</code>: list of columns to show in popup bubble.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.plot_data_on_map import plot_data_on_map
import polars as pl

df = pl.DataFrame({"name":["Clinic A","Clinic B"], "lat":[34.5,34.3], "lon":[69.1,62.2]})
map_ = plot_data_on_map(df, lat_col="lat", lon_col="lon", popup_cols=["name"])  # returns a Folium map
map_.save("map_points.html")
</code></pre>
        </div>
        <p class="text-gray-700 text-sm mt-2"><strong>Output:</strong> A Folium map object you can <code>save("file.html")</code>.</p>
      </section>

      <!-- overlay_multiple_indicators_on_map -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="overlay-indicators">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="layers" class="w-4 h-4"></i>
          overlay_multiple_indicators_on_map(df, lat_col, lon_col, indicators, popup_cols=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Show multiple indicators as circle markers.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> You want to compare values like in_need and reached at sites.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> See intensity by size/color on map.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>df</code>: Polars table with <code>lat_col</code>, <code>lon_col</code>.</li>
          <li><code>indicators</code>: list of numeric columns to overlay.</li>
          <li><code>popup_cols</code>: extra fields to show when clicked.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.overlay_multiple_indicators_on_map import overlay_multiple_indicators_on_map
import polars as pl

df = pl.DataFrame({
  "name":["Site1","Site2"], "lat":[34.5,34.7], "lon":[69.1,69.2],
  "in_need":[200,500], "reached":[120,300]
})
map_ = overlay_multiple_indicators_on_map(df, "lat", "lon", indicators=["in_need","reached"], popup_cols=["name"])
map_.save("map_indicators.html")
</code></pre>
        </div>
      </section>

      <!-- choropleth_maps_by_region -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="choropleth">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="grid" class="w-4 h-4"></i>
          choropleth_maps_by_region(geojson_path, df, region_key, value_col)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Fill provinces/districts by color (value).</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> You have province values like severity rate or coverage %.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Understand spatial variation quickly.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>geojson_path</code>: GeoJSON file with region polygons.</li>
          <li><code>df</code>: table with a region column and a numeric value column.</li>
          <li><code>region_key</code>: column matching the GeoJSON property (like province name).</li>
          <li><code>value_col</code>: numeric column to color by.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.choropleth_maps_by_region import choropleth_maps_by_region
import polars as pl

df = pl.DataFrame({"province":["Kabul","Herat"], "rate":[20.5,15.0]})
map_ = choropleth_maps_by_region("data/afg_provinces.geojson", df, region_key="province", value_col="rate")
map_.save("map_choropleth.html")
</code></pre>
        </div>
      </section>

      <!-- heatmap_crisis_intensity -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="heatmap">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="flame" class="w-4 h-4"></i>
          heatmap_crisis_intensity(df, lat_col, lon_col, intensity_col)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Heatmap using intensity values.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Values are dense at hotspots (e.g., reports, cases).</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> See clusters and hotspots immediately.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>lat_col</code>, <code>lon_col</code>: coordinates columns.</li>
          <li><code>intensity_col</code>: numeric weight per point.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.heatmap_crisis_intensity import heatmap_crisis_intensity
import polars as pl

df = pl.DataFrame({"lat":[34.5,34.7], "lon":[69.1,69.2], "score":[5,10]})
map_ = heatmap_crisis_intensity(df, "lat", "lon", "score")
map_.save("map_heat.html")
</code></pre>
        </div>
      </section>

      <!-- cluster_humanitarian_facilities -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="cluster-facilities">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="hospital" class="w-4 h-4"></i>
          cluster_humanitarian_facilities(df, lat_col, lon_col, name_col=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Group nearby facilities into clusters.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Many sites are close; map gets crowded.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Clean map, better UX, expand clusters to see members.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>name_col</code>: optional label for popups.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.cluster_humanitarian_facilities import cluster_humanitarian_facilities
import polars as pl

df = pl.DataFrame({"name":["Clinic A","Clinic B"], "lat":[34.5,34.5005], "lon":[69.1,69.1005]})
map_ = cluster_humanitarian_facilities(df, "lat", "lon", name_col="name")
map_.save("map_facilities.html")
</code></pre>
        </div>
      </section>

      <!-- generate_buffer_zones -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="buffers">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="circle" class="w-4 h-4"></i>
          generate_buffer_zones(df, lat_col, lon_col, distance_meters)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Draw circle buffers (e.g., 500m) around points.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> You need coverage zones around facilities.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Visualize service radius or risk zones.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>distance_meters</code>: radius in meters (example: 500).</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.generate_buffer_zones import generate_buffer_zones
import polars as pl

df = pl.DataFrame({"name":["Site1"], "lat":[34.5], "lon":[69.1]})
map_ = generate_buffer_zones(df, "lat", "lon", distance_meters=500)
map_.save("map_buffer.html")
</code></pre>
        </div>
      </section>

      <!-- visualize_hazard_areas -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="hazards">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="triangle-alert" class="w-4 h-4"></i>
          visualize_hazard_areas(geojson_or_df, hazard_type_col=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Show polygons representing hazard areas.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> You have flood zones, landslide areas, etc.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Risk communication and planning.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>geojson_or_df</code>: GeoJSON path or compatible table.</li>
          <li><code>hazard_type_col</code>: optional column to style by type.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.visualize_hazard_areas import visualize_hazard_areas
# See module docstring for details; pass GeoJSON path or a table as supported.
</code></pre>
        </div>
      </section>

      <!-- display_refugee_camp_locations -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="camps">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="tent" class="w-4 h-4"></i>
          display_refugee_camp_locations(df, lat_col, lon_col, name_col=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Show refugee/IDP camp points.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Camp coordinates available from partners.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Planning and coordination.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>name_col</code>: optional column for camp name in popup.</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.display_refugee_camp_locations import display_refugee_camp_locations
import polars as pl

df = pl.DataFrame({"camp":["Camp A"], "lat":[34.4], "lon":[69.2]})
map_ = display_refugee_camp_locations(df, "lat", "lon", name_col="camp")
map_.save("map_camps.html")
</code></pre>
        </div>
      </section>

      <!-- conflict_zones_polygons -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="conflict-zones">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="octagon-alert" class="w-4 h-4"></i>
          conflict_zones_polygons(geojson_or_df, level="district")
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Draw polygons to show conflict zones.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Conflict extent is provided per district/province.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Situation awareness and analysis.</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>geojson_or_df</code>: polygons source.</li>
          <li><code>level</code>: area level (e.g., <code>"district"</code>).</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.conflict_zones_polygons import conflict_zones_polygons
# See module docstring for usage based on your inputs.
</code></pre>
        </div>
      </section>

      <!-- connect_with_openstreetmap -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="osm">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="globe" class="w-4 h-4"></i>
          connect_with_openstreetmap(bbox, tags)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Fetch OSM features (roads, clinics, schools) by bounding box and tags.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> You need base features to enrich your map.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Free global data source (OpenStreetMap).</p>
        <h3 class="text-sm font-semibold mt-3">Parameters</h3>
        <ul class="text-sm text-gray-700 list-disc pl-6">
          <li><code>bbox</code>: (south, west, north, east) tuple.</li>
          <li><code>tags</code>: dict filter (example: <code>{"amenity": "clinic"}</code>).</li>
        </ul>
        <div class="relative mt-2">
          <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
          <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python">from huda.geospatial.connect_with_openstreetmap import connect_with_openstreetmap

bbox = (34.2, 69.0, 34.8, 69.5)  # south, west, north, east for Kabul area
features = connect_with_openstreetmap(bbox=bbox, tags={"amenity": "clinic"})
print(features)
</code></pre>
        </div>
      </section>

      <footer class="text-xs text-gray-500 mt-10">© <span id="year"></span> HuDa</footer>
    </div>

    <script>
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      lucide.createIcons();
      if (window.hljs) { hljs.highlightAll(); }
      document.querySelectorAll('.copy-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          const pre = btn.nextElementSibling;
          const code = pre && pre.querySelector('code');
          if (!code) return;
          const text = code.innerText;
          navigator.clipboard.writeText(text).then(() => {
            const old = btn.textContent;
            btn.textContent = 'Copied!';
            setTimeout(() => (btn.textContent = old), 1200);
          });
        });
      });
    </script>
    </div>

    <!-- Footer -->
    <footer class="border-t border-white/60 bg-white/70 backdrop-blur supports-[backdrop-filter]:bg-white/60">
      <div class="max-w-7xl mx-auto px-4 md:px-6 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="text-sm text-gray-600">© <span id="year"></span> HuDa. Built for humanitarian analysts.</div>
        <div class="flex items-center gap-4 text-gray-600">
          <a href="#about" class="inline-flex items-center gap-1 hover:text-gray-900"><i data-lucide="info" class="w-4 h-4"></i>About</a>
          <a href="#contact" class="inline-flex items-center gap-1 hover:text-gray-900"><i data-lucide="mail" class="w-4 h-4"></i>Contact</a>
        </div>
      </div>
    </footer>
  </body>
</html>
