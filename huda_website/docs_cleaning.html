<!DOCTYPE html>
<html lang="en" class="h-full bg-gray-50">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HuDa Docs — Cleaning</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="./theme.css" />
  </head>
  <body class="min-h-screen mdp">
    <!-- Top Gradient Header -->
    <div class="w-full bg-gradient-to-r from-indigo-600 via-sky-600 to-emerald-600 text-white">
      <div class="max-w-7xl mx-auto px-4 md:px-6">
        <div class="flex items-center justify-between py-3">
          <div class="flex items-center gap-2">
            <i data-lucide="database" class="w-5 h-5"></i>
            <span class="font-semibold tracking-tight">HuDa — Humanitarian Data Library</span>
          </div>
          <div class="hidden md:flex items-center gap-4 text-sm opacity-90">
            <a href="./index.html#overview" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="home" class="w-4 h-4"></i>Overview</a>
            <a href="./index.html" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="book-open" class="w-4 h-4"></i>Docs</a>
            <a href="#about" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="info" class="w-4 h-4"></i>About Us</a>
            <a href="#contact" class="inline-flex items-center gap-1 hover:opacity-100"><i data-lucide="mail" class="w-4 h-4"></i>Contact Us</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Persistent Sidebar -->
    <aside class="hidden md:block fixed top-[48px] left-0 h-[calc(100vh-48px)] w-72 overflow-y-auto bg-white/80 backdrop-blur border-r border-white/60 shadow-sm p-4">
      <div class="flex items-center gap-2 mb-4">
        <i data-lucide="database" class="w-5 h-5 text-indigo-600"></i>
        <span class="text-sm font-semibold">HuDa Navigation</span>
      </div>
      <nav class="space-y-1 text-sm">
        <a href="./index.html#overview" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="home" class="w-4 h-4"></i>Overview</a>
        <div class="pt-2 pb-1 text-[10px] uppercase tracking-wider text-gray-500">Phases</div>
        <a href="./docs_opening.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="folder-open" class="w-4 h-4"></i>Opening</a>
        <a href="./docs_cleaning.html" class="flex items-center gap-2 px-3 py-2 rounded-md bg-indigo-50 text-indigo-700 hover:bg-indigo-100"><i data-lucide="brush" class="w-4 h-4"></i>Cleaning</a>
        <a href="./docs_transformation.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="workflow" class="w-4 h-4"></i>Transformation</a>
        <a href="./docs_validation_quality.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="shield-check" class="w-4 h-4"></i>Validation & Quality</a>
        <a href="./docs_geospatial.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="map" class="w-4 h-4"></i>Geospatial</a>
        <a href="./docs_analysis.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="line-chart" class="w-4 h-4"></i>Analysis</a>
        <a href="./docs_automation.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="workflow" class="w-4 h-4"></i>Automation</a>
        <a href="./docs_interoperability.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="share-2" class="w-4 h-4"></i>Interoperability</a>
        <a href="./docs_visualization.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="bar-chart-3" class="w-4 h-4"></i>Visualization</a>
        <a href="./docs_ml4humanitarian.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="bot" class="w-4 h-4"></i>ML for Humanitarian Data</a>
        <a href="./docs_document_processing.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="file-search" class="w-4 h-4"></i>Document Processing</a>
        <a href="./docs_humanitarian_metrics.html" class="flex items-center gap-2 px-3 py-2 rounded-md hover:bg-gray-100 text-gray-700"><i data-lucide="activity" class="w-4 h-4"></i>Humanitarian Metrics</a>
      </nav>
    </aside>

    <!-- Content wrapper to offset sidebar -->
    <div class="md:pl-72">
    <div class="max-w-5xl mx-auto p-6 md:p-10">
      <header class="flex items-center justify-between mb-8">
        <div class="flex items-center gap-3">
          <i data-lucide="brush" class="w-6 h-6 text-indigo-600"></i>
          <h1 class="text-2xl font-bold tracking-tight">Phase: Cleaning</h1>
        </div>
        <a href="./index.html" class="text-sm text-gray-600 hover:text-gray-900 inline-flex items-center gap-2"><i data-lucide="arrow-left" class="w-4 h-4"></i> Back</a>
      </header>

      <p class="text-gray-700">We clean the data. Very simple English. Short steps. Afghan survey examples. Each block shows: What, When, Why, Parameters, Example, Output.</p>

      <!-- normalize_columns -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="normalize-columns">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="case-sensitive" class="w-4 h-4"></i>
          normalize_columns(df)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Make column names clean (lowercase, underscores, no symbols).</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Columns are messy like <em>"Country Name ", "Population(2025)"</em>.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Easy to use in code and merging.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <p class="text-sm text-gray-700">Only <code>df</code> (your table).</p>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.normalize_columns import normalize_columns

import polars as pl
df = pl.DataFrame({
    "Country Name ": ["Afghanistan", "Syria"],
    "Population(2025)": [12345, 67890],
    "Food-Security": ["High", "Low"],
})

df_clean = normalize_columns(df)
print(df_clean)
</code></pre>
            </div>
          </div>
        </div>
        <p class="text-gray-700 text-sm mt-2"><strong>Output:</strong> New column names are simple, like <code>country_name</code>, <code>population2025</code>, <code>food_security</code>.</p>
      </section>

      <!-- translate_categories -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="translate-categories">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="languages" class="w-4 h-4"></i>
          translate_categories(df, columns=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Make categories same (Yes/No, Male/Female, Active/Inactive) from multi-language forms (Dari/Pashto/English).</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Values are mixed like “بلی/Yes/Y/نخیر/No”.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Easy analysis and charts.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>df</code>: your table</li>
              <li><code>columns</code>: None → all columns, or one column name, or a list of columns</li>
            </ul>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.translate_categories import translate_categories

import polars as pl
df = pl.DataFrame({
    "response": ["Yes", "بلی", "نخیر", "Y", "N"],
    "gender": ["زن", "مرد", "Female", "Male", "F"],
})

df_clean = translate_categories(df, columns=["response", "gender"])
print(df_clean)
</code></pre>
            </div>
          </div>
        </div>
        <p class="text-gray-700 text-sm mt-2"><strong>Output:</strong> Clean text like <code>Yes/No</code>, <code>Male/Female</code>.</p>
      </section>

      <!-- numbers_standardization -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="standardize-numbers">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="hash" class="w-4 h-4"></i>
          standardize_numbers(df, columns=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Turn messy numbers ("1,200", "۱٬۲۰۰", "3.5M", "2k") into real numbers.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Data from many sources/languages.</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Correct sums/averages and plots.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>columns</code>: None → all columns, or one column, or list of columns</li>
            </ul>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.numbers_standardization import standardize_numbers

import polars as pl
df = pl.DataFrame({
    "price": ["1,200", "۱٬۵۰۰", "2.000,50", "N/A"],
    "population": ["2,345,000", "۳٬۴۵۶٬۷۸۹", "500k", "1.2 B"],
})

df_clean = standardize_numbers(df)
print(df_clean)
</code></pre>
            </div>
          </div>
        </div>
        <p class="text-gray-700 text-sm mt-2"><strong>Output:</strong> Floats like <code>1200.0</code>, <code>3456789.0</code>.</p>
      </section>

      <!-- dates_standardization -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="standardize-dates">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="calendar" class="w-4 h-4"></i>
          dates_standardization(df, column, style="iso|us|eu|full|short")
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Make date formats the same (like 2025-10-05).</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Your dates look different ("05-10-2025", "2025/10/05").</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Safe sorting, joining, and time series.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>column</code>: which column has dates</li>
              <li><code>style</code>: one of <code>iso, us, eu, full, short</code></li>
            </ul>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.dates_standardization import dates_standardization

import polars as pl
df = pl.DataFrame({"date": ["2025/10/05", "05-10-2025", "2025.10.05"]})

print(dates_standardization(df, "date", style="iso"))
print(dates_standardization(df, "date", style="eu"))
</code></pre>
            </div>
          </div>
        </div>
        <p class="text-gray-700 text-sm mt-2"><strong>Output:</strong> Date strings in the format you pick.</p>
      </section>

      <!-- drop_missing / duplicate -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="missing-duplicates">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="eraser" class="w-4 h-4"></i>
          drop_missing(df, column=None) & duplicate(df, columns=None, keep="first|last|False")
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Remove empty rows; remove or keep duplicates.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold mb-2">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>drop_missing: column</code> (None = any null in row)</li>
              <li><code>duplicate: columns</code> (None = all), <code>keep</code> = first/last/False</li>
            </ul>
            <h3 class="text-sm font-semibold mt-4">When/Why</h3>
            <p class="text-sm text-gray-700">Clean table, avoid double counting.</p>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.drop_missing import drop_missing
from huda.cleaning.duplicate import duplicate

import polars as pl
df = pl.DataFrame({"name": ["Ali", None, "Sara"], "year": [2025, 2025, 2025]})

df1 = drop_missing(df, column="name")
df2 = duplicate(df1, columns=["name","year"], keep="first")
print(df2)
</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- fill_* and forward/backward -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="fill-values">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="replace" class="w-4 h-4"></i>
          fill_mean/median/mode & forward_fill/backward_fill
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Fill missing values using simple rules.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Few gaps in numeric or text columns.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>fill_mean/median/mode(df, column)</code></li>
              <li><code>forward_fill/backward_fill(df, column)</code> for time data</li>
            </ul>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.fill_mean import fill_mean
from huda.cleaning.fill_median import fill_median
from huda.cleaning.fill_mode import fill_mode
from huda.cleaning.forward_fill import forward_fill
from huda.cleaning.backward_fill import backward_fill

import polars as pl
df = pl.DataFrame({"age": [20, None, 30], "temp": [20, None, 25]})

print(fill_mean(df, "age"))
print(fill_median(df, "age"))
print(fill_mode(pl.DataFrame({"city":["Kabul", None, "Kabul"]}), "city"))
print(forward_fill(df, "temp"))
print(backward_fill(df, "temp"))
</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- outlier_handler / outlier_isolation -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="outliers">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="alert-triangle" class="w-4 h-4"></i>
          outlier_handler(df, columns=None, method="iqr|zscore", factor=1.5) & outlier_isolation(df, columns=None, contamination=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Detect and remove extreme values.</p>
        <p class="text-gray-700 text-sm"><strong>When:</strong> Numbers look wrong (like 100 years old = 1000).</p>
        <p class="text-gray-700 text-sm"><strong>Why:</strong> Stop bad numbers from breaking stats.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>outlier_handler</code>: <code>columns</code> (None/all), <code>method</code> (iqr|zscore), <code>factor</code> (1.5 default)</li>
              <li><code>outlier_isolation</code>: <code>columns</code> (None/all), <code>contamination</code> auto if None</li>
            </ul>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.outlier_handler import outlier_handler
from huda.cleaning.outlier_isolation import outlier_isolation

import polars as pl
df = pl.DataFrame({"age": [20,22,19,100,21,23], "income":[3000,3200,3100,99999,3050,3150]})

print(outlier_handler(df))
print(outlier_isolation(df))
</code></pre>
            </div>
          </div>
        </div>
      </section>

      <!-- combine_datasets / admin_boundaries / geocode -->
      <section class="mt-8 rounded-lg border border-gray-200 bg-white p-5" id="combine-admin-geocode">
        <div class="flex items-center gap-2 text-base font-semibold text-gray-900 mb-2">
          <i data-lucide="merge" class="w-4 h-4"></i>
          combine_datasets(df1, df2, on, how) — admin_boundaries(...) — geocode(df, location_col=None)
        </div>
        <p class="text-gray-700 text-sm"><strong>What:</strong> Merge tables, fix province/district spellings, find lat/lon for places.</p>
        <div class="grid md:grid-cols-2 gap-6 mt-4">
          <div>
            <h3 class="text-sm font-semibold">Parameters</h3>
            <ul class="text-sm text-gray-700 list-disc pl-6">
              <li><code>combine_datasets</code>: <code>on</code> join key, <code>how</code> = inner|left|right|outer</li>
              <li><code>admin_boundaries</code>: <code>country_col</code>, <code>adm1_col</code>, <code>adm2_col</code>, <code>threshold</code></li>
              <li><code>geocode</code>: <code>location_col</code> (auto if None)</li>
            </ul>
          </div>
          <div>
            <h3 class="text-sm font-semibold">Example</h3>
            <div class="relative">
              <button class="copy-btn absolute top-2 right-2 text-xs px-2 py-1 rounded bg-gray-700 text-white">Copy</button>
              <pre class="rounded-md bg-gray-900 text-gray-100 p-3 overflow-auto"><code class="language-python"># Python
from huda.cleaning.combine_datasets import combine_datasets
from huda.cleaning.admin_boundaries import admin_boundaries
from huda.cleaning.geocode import geocode

import polars as pl
df1 = pl.DataFrame({"country":["Afghanistan","Syria"], "population":[39_000_000,18_000_000]})
df2 = pl.DataFrame({"country":["Afghanistan","Pakistan"], "gdp":[20.1,310.0]})
print(combine_datasets(df1, df2, on="country", how="outer"))

adm = pl.DataFrame({"country":["Afghanistan","Afganistan"], "province":["Kabul","Kabol"], "district":["Kabul","Kabool"]})
print(admin_boundaries(adm))

places = pl.DataFrame({"province":["Kabul","Herat"]})
print(geocode(places, location_col="province"))
</code></pre>
            </div>
          </div>
        </div>
      </section>

      <footer class="text-xs text-gray-500 mt-10">© <span id="year"></span> HuDa</footer>
    </div>

    <script>
      const yearEl = document.getElementById('year');
      if (yearEl) yearEl.textContent = new Date().getFullYear();
      lucide.createIcons();
      if (window.hljs) { hljs.highlightAll(); }

      document.querySelectorAll('.copy-btn').forEach((btn) => {
        btn.addEventListener('click', () => {
          const pre = btn.nextElementSibling;
          const code = pre && pre.querySelector('code');
          if (!code) return;
          const text = code.innerText;
          navigator.clipboard.writeText(text).then(() => {
            const old = btn.textContent;
            btn.textContent = 'Copied!';
            setTimeout(() => (btn.textContent = old), 1200);
          });
        });
      });
    </script>
    </div>

    <!-- Footer -->
    <footer class="border-t border-white/60 bg-white/70 backdrop-blur supports-[backdrop-filter]:bg-white/60">
      <div class="max-w-7xl mx-auto px-4 md:px-6 py-6 flex flex-col md:flex-row items-center justify-between gap-4">
        <div class="text-sm text-gray-600">© <span id="year"></span> HuDa. Built for humanitarian analysts.</div>
        <div class="flex items-center gap-4 text-gray-600">
          <a href="#about" class="inline-flex items-center gap-1 hover:text-gray-900"><i data-lucide="info" class="w-4 h-4"></i>About</a>
          <a href="#contact" class="inline-flex items-center gap-1 hover:text-gray-900"><i data-lucide="mail" class="w-4 h-4"></i>Contact</a>
        </div>
      </div>
    </footer>
  </body>
</html>
